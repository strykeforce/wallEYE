{"ast":null,"code":"import{Card,Button,Image,Col,Row,Badge}from\"react-bootstrap\";import CameraSettings from\"./CameraSettings\";import{socket}from\"../socket\";import\"bootstrap-icons/font/bootstrap-icons.css\";import Confirm from\"./Confirm\";import{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CameraStream(props){const[showCalWarning,setShowCalWarning]=useState(false);function action(){socket.emit(\"generate_calibration\",props.camID);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Confirm,{show:showCalWarning,setShow:setShowCalWarning,state:props.state,action:action,camID:props.camID}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"d-flex justify-content-between\",children:[\"Camera Stream \",props.camID,/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-end\",children:[/*#__PURE__*/_jsxs(Badge,{bg:\"info\",className:\"mx-1\",children:[props.readTime,\" secs\"]}),props.state.calFilePaths[props.camID]?/*#__PURE__*/_jsx(Badge,{bg:\"success\",className:\"mx-1\",children:\"Calibration loaded!\"}):props.state.calFilePaths[props.camID]==null&&/*#__PURE__*/_jsx(Badge,{bg:\"danger\",className:\"mx-1\",children:\"Calibration not available!!\"})]})]}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(Row,{children:[props.showConfig&&/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(CameraSettings,{camID:props.camID,state:props.state})}),/*#__PURE__*/_jsxs(Col,{children:[/*#__PURE__*/_jsx(\"a\",{href:\"video_feed/\"+props.camID,children:/*#__PURE__*/_jsx(Image,{src:\"video_feed/\"+props.camID,alt:\"Camera stream failed\",fluid:true})}),/*#__PURE__*/_jsxs(Card.Text,{children:[\" \",\"Estimated Pose:\",\" \",props.poses?props.poses[props.camID]:\"Not available\",\" \"]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Button,{variant:\"primary\",className:\"m-2\",onClick:()=>{socket.emit(\"toggle_calibration\",props.camID);},children:[/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-camera-video\"}),props.state.currentState===\"BEGIN_CALIBRATION\"||props.state.currentState===\"CALIBRATION_CAPTURE\"?\"End Calibration\":\"Start Calibration\"]}),/*#__PURE__*/_jsxs(Button,{variant:\"secondary\",className:\"m-2\",onClick:()=>{if(props.state.calFilePaths[props.camID])setShowCalWarning(true);else action();},children:[/*#__PURE__*/_jsx(\"i\",{class:\"bi bi-check\"}),\"Generate Calibration\"]})]})]})})]})]});}","map":{"version":3,"names":["Card","Button","Image","Col","Row","Badge","CameraSettings","socket","Confirm","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CameraStream","props","showCalWarning","setShowCalWarning","action","emit","camID","children","show","setShow","state","Header","className","bg","readTime","calFilePaths","Body","showConfig","href","src","alt","fluid","Text","poses","variant","onClick","class","currentState"],"sources":["/home/orangepi/Desktop/wallEYE-main/PiSideCode/web_interface/walleye/src/Components/CameraStream.jsx"],"sourcesContent":["import { Card, Button, Image, Col, Row, Badge } from \"react-bootstrap\";\nimport CameraSettings from \"./CameraSettings\";\nimport { socket } from \"../socket\";\nimport \"bootstrap-icons/font/bootstrap-icons.css\";\nimport Confirm from \"./Confirm\";\nimport { useState } from \"react\";\n\nexport default function CameraStream(props) {\n    const [showCalWarning, setShowCalWarning] = useState(false);\n\n    function action() {\n        socket.emit(\"generate_calibration\", props.camID);\n    }\n\n    return (\n        <>\n            <Confirm\n                show={showCalWarning}\n                setShow={setShowCalWarning}\n                state={props.state}\n                action={action}\n                camID={props.camID}\n            />\n\n            <Card>\n                <Card.Header className=\"d-flex justify-content-between\">\n                    Camera Stream {props.camID} \n                    <div className=\"d-flex justify-content-end\">\n                        <Badge bg=\"info\" className=\"mx-1\">{props.readTime} secs</Badge>\n                        {props.state.calFilePaths[props.camID] ? (\n                            <Badge bg=\"success\" className=\"mx-1\">Calibration loaded!</Badge>\n                        ) : (\n                            props.state.calFilePaths[props.camID] == null && (\n                                <Badge bg=\"danger\" className=\"mx-1\">Calibration not available!!</Badge>\n                            )\n                        )}\n                    </div>\n                </Card.Header>\n                <Card.Body>\n                    <Row>\n                        {props.showConfig && (\n                            <Col>\n                                <CameraSettings\n                                    camID={props.camID}\n                                    state={props.state}\n                                />\n                            </Col>\n                        )}\n\n                        <Col>\n                            <a href={\"video_feed/\" + props.camID}>\n                                <Image\n                                    src={\"video_feed/\" + props.camID}\n                                    alt=\"Camera stream failed\"\n                                    fluid\n                                />\n                            </a>\n\n                            <Card.Text>\n                                {\" \"}\n                                Estimated Pose:{\" \"}\n                                {props.poses\n                                    ? props.poses[props.camID]\n                                    : \"Not available\"}{\" \"}\n                            </Card.Text>\n                            <br />\n\n                            <Button\n                                variant=\"primary\"\n                                className=\"m-2\"\n                                onClick={() => {\n                                    socket.emit(\n                                        \"toggle_calibration\",\n                                        props.camID\n                                    );\n                                }}\n                            >\n                                <i class=\"bi bi-camera-video\"></i>\n                                {props.state.currentState ===\n                                    \"BEGIN_CALIBRATION\" ||\n                                    props.state.currentState ===\n                                    \"CALIBRATION_CAPTURE\"\n                                    ? \"End Calibration\"\n                                    : \"Start Calibration\"}\n                            </Button>\n\n                            <Button\n                                variant=\"secondary\"\n                                className=\"m-2\"\n                                onClick={() => {\n                                    if (props.state.calFilePaths[props.camID])\n                                        setShowCalWarning(true);\n                                    else action();\n                                }}\n                            >\n                                <i class=\"bi bi-check\"></i>\n                                Generate Calibration\n                            </Button>\n                        </Col>\n                    </Row>\n                </Card.Body>\n            </Card>\n        </>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}