{"ast":null,"code":"import{useEffect,useState}from\"react\";import Navigation from\"./Components/Navigation.jsx\";import{pages}from\"./data.js\";import Config from\"./Components/Config.jsx\";import\"./bootstrap.min.css\";import Dashboard from\"./Components/Dashboard.jsx\";import{socket}from\"./socket.js\";import{Alert,Container,Form,Spinner,Stack,ToastContainer}from\"react-bootstrap\";import{Helmet}from\"react-helmet\";import\"./App.css\";import PoseVisualizationList from\"./Components/PoseVisualizationList.jsx\";import AlertToast from\"./Components/AlertToast.jsx\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[page,setPage]=useState(\"dashboard\");const[state,setState]=useState(null);const[isConnected,setIsConnected]=useState(socket.connected);const[isDark,setIsDark]=useState(true);const[poses,setPoses]=useState(null);const[loopTime,setLoopTime]=useState(2767);const[camReadTime,setCamReadTime]=useState(null);const[msg,setMsg]=useState(\"Unknown!!!\");const[showToast,setShowToast]=useState(false);useEffect(()=>{const interval=setInterval(function(){socket.emit(\"pose_update\");socket.emit(\"performance_update\");socket.emit(\"msg_update\");},500);return()=>{clearInterval(interval);};},[]);// Runs once, force render after\nuseEffect(()=>{function onConnect(){setIsConnected(true);setMsg(\"Connected!\");setShowToast(true);}function onDisconnect(){setIsConnected(false);setMsg(\"Disconnected!\");setShowToast(true);}function onConfigReady(){window.open(\"./files/walleye_data/config.zip\",\"_blank\");}function onStateUpdate(newState){setState(newState);}function onError(error){alert(error);}function onPoseUpdate(poses){setPoses(poses);}function onPerformanceUpdate(time){setLoopTime(time.loopTime);setCamReadTime(time.camReadTime);console.log(time);}function onMsgUpdate(msg){setMsg(msg);setShowToast(true);}socket.on(\"connect\",onConnect);socket.on(\"disconnect\",onDisconnect);socket.on(\"state_update\",onStateUpdate);socket.on(\"error\",onError);socket.on(\"pose_update\",onPoseUpdate);socket.on(\"performance_update\",onPerformanceUpdate);socket.on(\"config_ready\",onConfigReady);socket.on(\"msg_update\",onMsgUpdate);return()=>{socket.off(\"connect\",onConnect);socket.off(\"disconnect\",onDisconnect);socket.off(\"state_update\",onStateUpdate);socket.off(\"error\",onError);socket.off(\"pose_update\",onPoseUpdate);socket.off(\"performance_update\",onPerformanceUpdate);socket.off(\"config_ready\",onConfigReady);socket.off(\"msg_update\",onMsgUpdate);};},[]);if(!state){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"html\",{className:\"position-relative\"})}),/*#__PURE__*/_jsx(Spinner,{animation:\"border\",className:\"position-absolute top-50 start-50 translate-middle\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"html\",{\"data-bs-theme\":isDark?\"dark\":\"light\"})}),/*#__PURE__*/_jsx(ToastContainer,{position:\"bottom-start\",className:\"p-3 position-fixed\",style:{zIndex:1},children:/*#__PURE__*/_jsx(AlertToast,{msg:msg,show:showToast,setShow:setShowToast})}),/*#__PURE__*/_jsxs(\"center\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"display-3\",children:\"WallEYE\"}),/*#__PURE__*/_jsxs(Stack,{direction:\"vertical\",gap:1,children:[/*#__PURE__*/_jsx(Form,{className:\"position-absolute top-50 end-0 translate-middle-y\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"switch\",onChange:()=>setIsDark(!isDark),label:\"Dark Mode\",checked:isDark})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Loop Time: \",loopTime,\" secs\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",msg,\" \"]})]})]}),/*#__PURE__*/_jsx(Navigation,{sticky:\"top\",page:page,pages:pages,setPage:setPage}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Container,{children:[page===\"dashboard\"&&/*#__PURE__*/_jsx(Dashboard,{state:state,poses:poses,camReadTime:camReadTime}),page===\"config\"&&/*#__PURE__*/_jsx(Config,{state:state}),page===\"pose_visualization\"&&/*#__PURE__*/_jsx(PoseVisualizationList,{state:state,poses:poses})]})]});}export default App;","map":{"version":3,"names":["useEffect","useState","Navigation","pages","Config","Dashboard","socket","Alert","Container","Form","Spinner","Stack","ToastContainer","Helmet","PoseVisualizationList","AlertToast","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","page","setPage","state","setState","isConnected","setIsConnected","connected","isDark","setIsDark","poses","setPoses","loopTime","setLoopTime","camReadTime","setCamReadTime","msg","setMsg","showToast","setShowToast","interval","setInterval","emit","clearInterval","onConnect","onDisconnect","onConfigReady","window","open","onStateUpdate","newState","onError","error","alert","onPoseUpdate","onPerformanceUpdate","time","console","log","onMsgUpdate","on","off","children","className","animation","position","style","zIndex","show","setShow","direction","gap","Check","type","onChange","label","checked","sticky"],"sources":["/home/orangepi/Desktop/wallEYE-main/PiSideCode/web_interface/walleye/src/App.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Navigation from \"./Components/Navigation.jsx\";\nimport { pages } from \"./data.js\";\nimport Config from \"./Components/Config.jsx\";\nimport \"./bootstrap.min.css\";\nimport Dashboard from \"./Components/Dashboard.jsx\";\nimport { socket } from \"./socket.js\";\nimport { Alert, Container, Form, Spinner, Stack, ToastContainer } from \"react-bootstrap\";\nimport { Helmet } from \"react-helmet\";\nimport \"./App.css\";\nimport PoseVisualizationList from \"./Components/PoseVisualizationList.jsx\";\nimport AlertToast from \"./Components/AlertToast.jsx\";\n\nfunction App() {\n    const [page, setPage] = useState(\"dashboard\");\n    const [state, setState] = useState(null);\n    const [isConnected, setIsConnected] = useState(socket.connected);\n    const [isDark, setIsDark] = useState(true);\n    const [poses, setPoses] = useState(null);\n    const [loopTime, setLoopTime] = useState(2767);\n    const [camReadTime, setCamReadTime] = useState(null);\n    const [msg, setMsg] = useState(\"Unknown!!!\");\n    const [showToast, setShowToast] = useState(false);\n\n    useEffect(() => {\n        const interval = setInterval(function () {\n            socket.emit(\"pose_update\");\n            socket.emit(\"performance_update\");\n            socket.emit(\"msg_update\");\n        }, 500);\n\n        return () => {\n            clearInterval(interval);\n        };\n    }, []);\n\n    // Runs once, force render after\n    useEffect(() => {\n        function onConnect() {\n            setIsConnected(true);\n            setMsg(\"Connected!\");\n            setShowToast(true);\n        }\n\n        function onDisconnect() {\n            setIsConnected(false);\n            setMsg(\"Disconnected!\");\n            setShowToast(true);\n        }\n\n        function onConfigReady() {\n            window.open(\"./files/walleye_data/config.zip\", \"_blank\");\n        }\n\n        function onStateUpdate(newState) {\n            setState(newState);\n        }\n\n        function onError(error) {\n            alert(error);\n        }\n\n        function onPoseUpdate(poses) {\n            setPoses(poses);\n        }\n\n        function onPerformanceUpdate(time) {\n            setLoopTime(time.loopTime);\n            setCamReadTime(time.camReadTime);\n            console.log(time);\n        }\n\n        function onMsgUpdate(msg) {\n            setMsg(msg);\n            setShowToast(true);\n        }\n\n\n        socket.on(\"connect\", onConnect);\n        socket.on(\"disconnect\", onDisconnect);\n        socket.on(\"state_update\", onStateUpdate);\n        socket.on(\"error\", onError);\n        socket.on(\"pose_update\", onPoseUpdate);\n        socket.on(\"performance_update\", onPerformanceUpdate);\n        socket.on(\"config_ready\", onConfigReady);\n        socket.on(\"msg_update\", onMsgUpdate);\n\n        return () => {\n            socket.off(\"connect\", onConnect);\n            socket.off(\"disconnect\", onDisconnect);\n            socket.off(\"state_update\", onStateUpdate);\n            socket.off(\"error\", onError);\n            socket.off(\"pose_update\", onPoseUpdate);\n            socket.off(\"performance_update\", onPerformanceUpdate);\n            socket.off(\"config_ready\", onConfigReady);\n            socket.off(\"msg_update\", onMsgUpdate);\n        };\n    }, []);\n\n    if (!state) {\n        return (\n            <>\n                <Helmet>\n                    <html className=\"position-relative\" />\n                </Helmet>\n                <Spinner\n                    animation=\"border\"\n                    className=\"position-absolute top-50 start-50 translate-middle\"\n                />\n            </>\n        );\n    }\n\n    return (\n        <div className=\"App\">\n            <Helmet>\n                <html data-bs-theme={isDark ? \"dark\" : \"light\"} />\n            </Helmet>\n\n            <ToastContainer position=\"bottom-start\" className=\"p-3 position-fixed\" style={{ zIndex: 1 }}>\n                <AlertToast msg={msg} show={showToast} setShow={setShowToast} />\n            </ToastContainer>\n\n            <center className=\"position-relative\">\n                <h1 className=\"display-3\">WallEYE</h1>\n\n                <Stack direction=\"vertical\" gap={1}>\n                    <Form className=\"position-absolute top-50 end-0 translate-middle-y\">\n                        <Form.Check\n                            type=\"switch\"\n                            onChange={() => setIsDark(!isDark)}\n                            label=\"Dark Mode\"\n                            checked={isDark}\n                        />\n                    </Form>\n                    <p>Loop Time: {loopTime} secs</p>\n                    <p> {msg} </p>\n                </Stack>\n            </center>\n\n            <Navigation\n                sticky=\"top\"\n                page={page}\n                pages={pages}\n                setPage={setPage}\n            ></Navigation>\n\n            <br />\n\n            <Container>\n                {page === \"dashboard\" && (\n                    <Dashboard state={state} poses={poses} camReadTime={camReadTime} />\n                )}\n                {page === \"config\" && <Config state={state} />}\n                {page === \"pose_visualization\" && (\n                    <PoseVisualizationList state={state} poses={poses} />\n                )}\n            </Container>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}